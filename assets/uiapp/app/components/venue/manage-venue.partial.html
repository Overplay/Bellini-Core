<div class="row">
    <div class="col-lg-6 col-lg-offset-3 col-sm-10 col-sm-offset-1">
        <h2 class="n-blue-box">{{ localVenue.name }}</h2>
        <uib-tabset active="active">
            <uib-tab heading="More Info">
                <div class="top15" style="padding: 20px; border: 2px solid #cacaca; border-radius: 5px;">
                    <div class="panel-heading">
                        <h3>Venue Information</h3>
                    </div>
                    <div class="panel-body">
                        <h4>Devices</h4>
                        <table class="table table-striped top15" ng-show="venue.devices.length">
                            <thead>
                            <tr>
                                <td>Name</td>
                                <td>Location in Venue</td>
                                <td></td>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="device in venue.devices">
                                <td>{{device.name}}</td>
                                <td>{{device.locationWithinVenue}}</td>
                                <td width="10%"><a ui-sref="device.manageDevice({id: device.id})" class="btn btn-sm btn-warning">More Info</a></td>
                            </tr>
                            </tbody>
                        </table>
                        <h4>Address</h4>
                        <div class="col-md-4">
                            <p>{{localVenue.address.street}}</p>
                            <p>{{localVenue.address.city}}, {{localVenue.address.state}} {{localVenue.address.zip}}</p>
                        </div>
                        <div class="col-md-8">
                            <a ng-click="showMap = !showMap" class="btn btn-info btn-sm" style="margin-bottom: 15px">
                                {{showMap ? "Show" : "Hide"}} Map
                            </a>
                            <div uib-collapse="showMap">
                                <iframe
                                        width="100%"
                                        height="450"
                                        frameborder="0" style="border:0"
                                        ng-src="{{mapLink | trustAsResourceUrl}}">
                                </iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </uib-tab>
            <uib-tab heading="Edit Venue">
                <div class="top15" style="padding: 20px; border: 2px solid #cacaca; border-radius: 5px;">
                    <div class="panel-heading">
                        <h3>Edit Venue</h3>
                    </div>
                    <div class="panel-body">
                        <form name="form" ng-submit="update()" role="form" ng-if="!code" class="form-horizontal">
                            <fieldset class="form-group">
                                <label for="name" class="col-sm-2 control-label">Venue Name</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" id="name" placeholder="Venue Name"
                                           ng-model="venue.name" required/>
                                </div>
                            </fieldset>
                            <fieldset class="form-group">
                                <label for="street" class="col-sm-2 control-label">Address</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" id="street" placeholder="Street"
                                           ng-model="venue.address.street" required/>
                                </div>
                            </fieldset>
                            <!--There's probably a better way of making this inline-->
                            <fieldset class="form-group" ng-class="{'has-error' : !form.zip.$valid}">
                                <div class="col-sm-5 col-sm-offset-2">
                                    <input type="text" class="form-control" id="city" placeholder="City"
                                           ng-model="venue.address.city" required/>
                                </div>
                                <div class="col-sm-2">
                                    <input type="text" class="form-control" placeholder="State"
                                           ng-model="venue.address.state" required/>
                                </div>
                                <div class="col-sm-3">
                                    <input type="text" class="form-control" placeholder="ZIP Code" ng-required
                                           ng-model="venue.address.zip" name="zip" ng-pattern="regex" />
                                </div>
                            </fieldset>
                            <fieldset class="form-group">
                                <div class="col-sm-offset-2 col-sm-10">
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" ng-model="venue.showInMobileAppMap"> Show in Mobile App Map
                                        </label>
                                    </div>
                                </div>
                            </fieldset>


                            <div class="form-actions">
                                <button type="submit" ng-disabled="form.$invalid" class="btn btn-primary top15">
                                    Update
                                </button>
                            </div>
                        </form>
                        <br>
                        <div>
                            <button class="btn btn-danger" ng-click="deleteVenue()" ng-disabled="!confirm.checked">
                                Delete
                            </button>
                            <input type="checkbox" ng-model="confirm.checked" style="margin-left: 5px;"><span>&nbsp;Confirm delete</span>
                        </div>
                    </div>
                </div>
            </uib-tab>
        </uib-tabset>
        <br>
        <a style="margin-bottom: 20px;"class="btn btn-primary" ui-sref="admin.manageVenues">Back to Venues</a>
    </div>


</div>
